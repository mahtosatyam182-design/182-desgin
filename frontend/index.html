<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShopMax - E-Commerce Store</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="logo">
                <i class="fas fa-shopping-bag"></i> ShopMax
            </a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link active">Home</a></li>
                <li><a href="products.html" class="nav-link">Products</a></li>
                <li><a href="cart.html" class="nav-link">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-badge" id="cart-badge">0</span>
                </a></li>
                <li><a href="orders.html" class="nav-link">Orders</a></li>
                <li><a href="api-docs.html" class="nav-link">API Docs</a></li>
            </ul>
            <div class="auth-buttons" id="auth-buttons">
                <a href="login.html" class="btn btn-outline">Login</a>
                <a href="register.html" class="btn btn-primary">Register</a>
            </div>
            <div class="user-menu" id="user-menu" style="display: none;">
                <span class="user-name" id="user-name"></span>
                <button class="btn btn-outline" onclick="logout()">Logout</button>
            </div>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1>Welcome to ShopMax</h1>
            <p>Discover Amazing Products at Unbeatable Prices</p>
            <a href="products.html" class="btn btn-primary btn-large">Shop Now</a>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-shipping-fast"></i>
                    <h3>Free Shipping</h3>
                    <p>On orders over $50</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-undo"></i>
                    <h3>Easy Returns</h3>
                    <p>30-day return policy</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-lock"></i>
                    <h3>Secure Payment</h3>
                    <p>100% secure checkout</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-headset"></i>
                    <h3>24/7 Support</h3>
                    <p>Dedicated support team</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products -->
    <section class="featured-products">
        <div class="container">
            <h2 class="section-title">Featured Products</h2>
            <div class="products-grid" id="featured-products">
                <!-- Products loaded dynamically -->
            </div>
            <div class="view-all">
                <a href="products.html" class="btn btn-secondary">View All Products</a>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <h2 class="section-title">Shop by Category</h2>
            <div class="categories-grid" id="categories-grid">
                <!-- Categories loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h3>ShopMax</h3>
                    <p>Your one-stop shop for all your needs. Quality products, best prices.</p>
                </div>
                <div class="footer-col">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="products.html">Products</a></li>
                        <li><a href="cart.html">Cart</a></li>
                        <li><a href="orders.html">Orders</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Support</h3>
                    <ul>
                        <li><a href="#">FAQ</a></li>
                        <li><a href="#">Shipping Info</a></li>
                        <li><a href="#">Returns</a></li>
                        <li><a href="api-docs.html">API Docs</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h3>Contact</h3>
                    <p><i class="fas fa-envelope"></i> support@shopmax.com</p>
                    <p><i class="fas fa-phone"></i> 1-800-SHOPMAX</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 ShopMax. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/app.js"></script>
    <script>
        // Initialize home page
        document.addEventListener('DOMContentLoaded', () => {
            loadFeaturedProducts();
            loadCategories();
            updateCartBadge();
            checkAuthState();
        });

        async function loadFeaturedProducts() {
            try {
                const response = await fetch('/api/products/featured');
                const result = await response.json();
                
                if (result.success) {
                    const productsGrid = document.getElementById('featured-products');
                    productsGrid.innerHTML = result.data.map(product => createProductCard(product)).join('');
                }
            } catch (error) {
                console.error('Error loading featured products:', error);
            }
        }

        async function loadCategories() {
            try {
                const response = await fetch('/api/categories');
                const result = await response.json();
                
                if (result.success) {
                    const categoriesGrid = document.getElementById('categories-grid');
                    categoriesGrid.innerHTML = result.data.map(category => `
                        <div class="category-card" onclick="filterByCategory(${category.id})">
                            <i class="fas fa-tag"></i>
                            <h3>${category.name}</h3>
                            <p>${category.productCount || 0} products</p>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Error loading categories:', error);
            }
        }

        function filterByCategory(categoryId) {
            window.location.href = `products.html?category=${categoryId}`;
        }
    </script>
</body>
</html>
